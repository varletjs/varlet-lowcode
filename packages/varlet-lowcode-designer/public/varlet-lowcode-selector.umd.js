var w=Object.defineProperty;var m=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var f=(n,e,t)=>e in n?w(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,u=(n,e)=>{for(var t in e||(e={}))N.call(e,t)&&f(n,t,e[t]);if(m)for(var t of m(e))P.call(e,t)&&f(n,t,e[t]);return n};(function(n,e){typeof exports=="object"&&typeof module!="undefined"?e(exports,require("vue"),require("@varlet/lowcode-core"),require("@varlet/ui")):typeof define=="function"&&define.amd?define(["exports","vue","@varlet/lowcode-core","@varlet/ui"],e):(n=typeof globalThis!="undefined"?globalThis:n||self,e(n.VarletLowcodeSelector={},n.Vue,n.VarletLowcodeCore,n.Varlet))})(this,function(n,e,t,l){"use strict";var b="",g=e.defineComponent({name:"VarletLowCodeSelectorPluginRender",props:{schemaId:{type:String}},setup(r){const s=t.pluginsManager.exportSelectorPlugins();return()=>e.createVNode("div",{class:"varlet-low-code-selector__plugins"},[s.map(({component:o})=>{const c=o;return e.createVNode(c,{schemaId:r.schemaId},null)})])}}),h=e.defineComponent({name:"VarletLowCodeSelector",props:{designerEventsManager:{type:Object,required:!0}},setup(r){const s={border:"2px solid red",boxSizing:"border-box",position:"absolute",zIndex:1e3,pointerEvents:"none"},o=e.ref([]),c=e.ref();function a(i){c.value=i.split("dragItem")[1];const p=document.querySelectorAll(`#${i}`);if(p&&p.length>0){const y=Array.from(p);o.value=y.map(C=>{const{top:I,left:V,width:k,height:B}=C.getBoundingClientRect(),M={top:`${I}px`,left:`${V}px`,width:`${k}px`,height:`${B}px`};return u(u({},M),s)})}}return e.onMounted(()=>{r.designerEventsManager.on("selector",a)}),e.onUnmounted(()=>{r.designerEventsManager.off("selector",a)}),()=>c.value&&o.value&&o.value.map((i,p)=>e.createVNode("div",{key:Symbol(i.toString()),style:i},[i&&p===o.value.length-1&&e.createVNode(g,{schemaId:c.value},null)]))}}),d={schemaId:String};const S=e.defineComponent({props:d,setup(r){const s=r,o=()=>{console.log("props",s.schemaId)};return(c,a)=>(e.openBlock(),e.createBlock(e.unref(l.Button),{onClick:o,round:"",size:"small",type:"success"},{default:e.withCtx(()=>[e.createVNode(e.unref(l.Icon),{name:"file-document-outline"})]),_:1}))}}),_=e.defineComponent({props:d,setup(r){const s=r,o=()=>{const c=t.schemaManager.exportSchema(),a=t.schemaManager.removeSchemaNodeById(c,s.schemaId);t.eventsManager.emit(t.BuiltInEvents.SCHEMA_CHANGE,a)};return(c,a)=>(e.openBlock(),e.createBlock(e.unref(l.Button),{round:"",onClick:o,size:"small",type:"danger"},{default:e.withCtx(()=>[e.createVNode(e.unref(l.Icon),{name:"trash-can-outline"})]),_:1}))}}),x=e.defineComponent({props:d,setup(r){const s=r,o=()=>{console.log("props",s.schemaId)};return(c,a)=>(e.openBlock(),e.createBlock(e.unref(l.Button),{onClick:o,round:"",size:"small",type:"warning"},{default:e.withCtx(()=>[e.createVNode(e.unref(l.Icon),{name:"menu"})]),_:1}))}});t.pluginsManager.useSelectorPlugin({name:"copy",component:S}).useSelectorPlugin({name:"remove",component:_}).useSelectorPlugin({name:"openSlots",component:x}),n.default=h,Object.defineProperties(n,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
